(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97cd1af0"],{"11e7":function(t,e,a){"use strict";a("d7db")},"127f":function(t,e,a){"use strict";a.d(e,"a",(function(){return C}));var i,n=a("c7eb"),r=a("1da1"),s=(a("b0c0"),a("8a79"),a("d3b7"),a("b64b"),a("e9c4"),a("ac1f"),a("5319"),a("bc3a")),o=a.n(s),l=o.a.CancelToken,c=o.a.create({baseURL:""});function d(t,e){return c({url:t,method:"post",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function u(t,e,a){return i=l.source(),c({url:t,method:"post",data:e,headers:{"Content-Type":"multipart/form-data"},cancelToken:i.token,onUploadProgress:function(t){"function"===typeof a&&a(t)}})}a("4360");var f="https://oss-cloud.gs-souvenir.com/gyoss/oss/web/config",p=/[\!\@\#\$\%\^\&\*\(\)\+\=\{\}\|\[\]\\\:\"\;\'\<\>\?\,\.\/\`\~]/gi,m="CNOss",g=function(t){var e=new Date,a=e.getMonth()+1;a>=1&&a<=9&&(a="0"+a);var i=e.getDate();i>=0&&i<=9&&(i="0"+i);var n=e.getFullYear()+a+i;t=t||32;for(var r="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=r.length,o="",l=0;l<t;l++)o+=r.charAt(Math.floor(Math.random()*s));return n+o},v=function(t){var e=t.lastIndexOf("."),a="";if(-1!==e){a=t.substring(e);var i=a.indexOf("?");if(-1!==i){var n="";return n=a.substring(0,i),n}return a}},h=function(t){var e=t.lastIndexOf("."),a="";return-1!==e&&(a=t.substring(0,e)),a},b=function(t){var e=g(6);return e+=v(t.name),e},y=function(t,e,a){var i=new FormData;i.append("policy",t.policy),i.append("OSSAccessKeyId",t.accessid),i.append("signature",t.signature),i.append("success_action_status","201");var n=t.dir;return n.endsWith("/")||(n+="/"),i.append("key",n+e),i.append("name",e),i.append("file",a),i},_=function(t,e){return new Promise((function(a,i){var n=(new Date).getTime()/1e3,r=localStorage.getItem(t)?Math.round(JSON.parse(localStorage.getItem(t)).expire):0;n>r-5?d(t,e).then((function(e){var i=e.data.data;localStorage.setItem(t,JSON.stringify(i)),a(i)})).catch((function(e){localStorage.removeItem(t),i("获取签名失败")})):a(JSON.parse(localStorage.getItem(t)))}))},C=function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(e,a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var n={systemName:m,modelDir:"quoteManage",isSSL:1},r=new FormData;r.append("systemName",n.systemName),r.append("modelDir",n.modelDir),r.append("isSSL",n.isSSL);var s="",o=h(e.name).replace(/\s+/g,"_").replace(p,"");s=o+"_"+b(e),_(f,r).then((function(n){var r=y(n,s,e);u(n.url,r,(function(t){"function"===typeof a&&a(t)})).then((function(e){var a=n.url+r.get("key");a=a.replace(/oss-static-cn.liyi.co/i,"static-oss.gs-souvenir.com"),t(a)})).catch((function(t){localStorage.removeItem(f),t.msg="OSS文件上传失败",i(t)}))})).catch((function(t){i(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},"13d5":function(t,e,a){"use strict";var i=a("23e7"),n=a("d58f").left,r=a("a640"),s=a("ae40"),o=r("reduce"),l=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!l},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2764:function(t,e,a){"use strict";a("ed93")},5253:function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").find,r=a("44d2"),s=a("ae40"),o="find",l=!0,c=s(o);o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},"8a79":function(t,e,a){"use strict";var i=a("23e7"),n=a("06cf").f,r=a("50c4"),s=a("5a34"),o=a("1d80"),l=a("ab13"),c=a("c430"),d="".endsWith,u=Math.min,f=l("endsWith"),p=!c&&!f&&!!function(){var t=n(String.prototype,"endsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!p&&!f},{endsWith:function(t){var e=String(o(this));s(t);var a=arguments.length>1?arguments[1]:void 0,i=r(e.length),n=void 0===a?i:u(r(a),i),l=String(t);return d?d.call(e,l,n):e.slice(n-l.length,n)===l}})},"8cc2":function(t,e,a){"use strict";a("5253")},ace3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"pageTop"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"搜索元素id或元素名称",clearable:""},on:{clear:t.clearSearchInputValue},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.btn_search},slot:"append"})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.btn_add}},[t._v("新增电镀")]),t.isdrag?[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.btn_saveDrag()}}},[t._v("保存")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.btn_cancel()}}},[t._v("取消")])]:[a("el-button",{staticClass:"dragBtn",attrs:{type:"info"},on:{click:function(e){return t.btn_openDrag()}}},[t._v("拖拽排序")])]],2),a("div",{staticClass:"cardBox",attrs:{id:"sortBox"}},t._l(t.cardList,(function(e,i){return a("div",{key:e.id,ref:"cardRef",refInFor:!0,staticClass:"card",attrs:{id:e.id}},[a("div",{staticClass:"top"},[a("span",[t._v(t._s(e.name))]),a("el-popover",{attrs:{"popper-class":"cardMenu",placement:"bottom",trigger:"click","visible-arrow":!1}},[a("p",{staticClass:"menuBtn btn1"},[t._v("编辑")]),a("p",{staticClass:"menuBtn  "},[t._v("启用")]),a("p",{staticClass:"menuBtn  "},[t._v("删除")]),a("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1),a("div",{staticClass:"content"},[t._m(0,!0),a("div",{staticClass:"content_right"}),"fff"==e.name?a("div",{staticClass:"shade"},[a("div",{staticClass:"shadeContent"})]):t._e()]),t.isdrag?a("div",{staticClass:"drag_shade"},[0!==i?a("i",{staticClass:"el-icon-top",on:{click:function(e){return t.cardToTop(i)}}}):t._e(),a("i",{staticClass:"el-icon-rank moveDome"})]):t._e()])})),0),a("el-dialog",{staticClass:"dialogVisibleClass",attrs:{title:t.dialogTitle+"电镀色",visible:t.dialogVisible,width:"50%","before-close":function(t){t()}},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ref_addEditform",attrs:{model:t.addEditform,"label-width":"115px",rules:t.rules}},[a("el-form-item",{attrs:{label:"电镀名称：",prop:"name"}},[a("el-input",{model:{value:t.addEditform.name,callback:function(e){t.$set(t.addEditform,"name",e)},expression:"addEditform.name"}})],1),a("el-form-item",{attrs:{label:"电镀主色：",prop:"mainColor"}},[a("el-input",{model:{value:t.addEditform.mainColor,callback:function(e){t.$set(t.addEditform,"mainColor",e)},expression:"addEditform.mainColor"}})],1),a("el-form-item",{attrs:{label:"电镀次色："}},[a("el-input",{model:{value:t.addEditform.secondaryColor,callback:function(e){t.$set(t.addEditform,"secondaryColor",e)},expression:"addEditform.secondaryColor"}})],1),a("el-form-item",{attrs:{label:"上传电镀图：",prop:"img"}},[a("template",{slot:"label"},[a("span",[t._v("上传电镀图：")]),a("div",{staticClass:"uploadPicLabel"},[a("p",[t._v("注：")]),a("p",[t._v(" 请上传不带模板或元素的Blank外形图")])])]),a("FileUpload",{attrs:{single:"","file-list":t.addEditform.img,accept:"image/jpeg,image/jpg,image/gif,image/png"},on:{updateList:t.updateFormDataImg}})],2),a("el-form-item",{attrs:{label:"类目状态："}},[a("el-switch",{attrs:{"active-color":"#0089F5","inactive-color":"#6D7074","active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0},model:{value:t.addEditform.isEnable,callback:function(e){t.$set(t.addEditform,"isEnable",e)},expression:"addEditform.isEnable"}})],1),a("el-form-item",{attrs:{label:"适用的类别：",prop:"typeList"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.addEditform.typeList,callback:function(e){t.$set(t.addEditform,"typeList",e)},expression:"addEditform.typeList"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"适用的工艺：",prop:"arts"}},[0==t.addEditform.typeList.length?a("div",{staticClass:"artsBox"},[a("p",{staticStyle:{color:"#BFBFBF"}},[t._v("根据选的适用类别，回填可选的工艺选项，再做选择")])]):t._l(t.addEditform.arts,(function(e,i){return a("div",{key:i,staticClass:"artsBox"},[a("span",{staticClass:"arts_left"},[t._v(t._s(e.name))]),a("div",{staticClass:"arts_right"},[t.addEditform.arts.length>0?a("div",{staticClass:"box"},t._l(e.list,(function(i,n){return a("div",{staticClass:"gary",class:{chooseColor:-1!=e.chooseList.indexOf(i)},on:{click:function(a){return t.itemClick(e,i)}}},[a("span",[t._v(t._s(i))])])})),0):t._e()])])}))],2),a("el-form-item",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.formSubmit}},[t._v("保存")]),a("el-button",{on:{click:t.formCancel}},[t._v("取消")])],1)],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content_left"},[a("p",[t._v("适用的类型：Coins, pins, Medals, Belt buckles, Trading pins ")]),a("p",[t._v("适用的工艺：Soft enamel pins, hard enamel, Die struck pins, Shiny Belt Buckles, Soft Enamel Medals")])])}],r=a("c7eb"),s=a("1da1"),o=(a("d81d"),a("7db0"),a("d3b7"),a("c7400"),a("caad"),a("2532"),a("a434"),a("13d5"),a("fb6a"),a("159b"),a("b64b"),a("99af"),a("e9c4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fileUpload"},[a("el-upload",{ref:"uploadFile",class:t.isBtnStyle?"btnStyle":"avatar-uploader",attrs:{action:"#","show-file-list":!t.single&&t.showFileList,accept:t.accept,"list-type":t.listType,limit:t.limit,"http-request":t.httpRequest,"file-list":t.single?[]:t.fileList,multiple:t.multiple,disabled:t.disabled,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-error":t.onError,"on-success":t.onSuccess,"on-progress":t.progress,"on-change":t.handleChange,"before-upload":t.beforeUpload,"before-remove":t.beforeRemove,"on-exceed":t.onExceed}},[t.single?[t._t("uploadBtn",[t.fileList?a("div",{staticClass:"avatarWrap"},[t.isImage?a("custom-image",{staticClass:"avatar",attrs:{src:t.fileList,isPreview:!0}}):t._e(),t.isVideo?a("custom-video",{staticClass:"avatar",attrs:{src:t.fileList}}):t._e(),a("div",{staticClass:"btnGroup"},[a("span",{on:{click:function(e){return e.stopPropagation(),t.handlePreviewAvatar(e)}}},[t._v(" "+t._s(t.$t("inquiryPage.preview"))+" ")]),a("span",{attrs:{slot:"trigger"},slot:"trigger"},[t._v(" "+t._s(t.$t("inquiryPage.uploading"))+" ")])])],1):a("div",{staticClass:"uploadBox avatar-uploader-icon"},[a("i",{class:t.uploadBoxIcon}),a("span",[t._v(t._s(t.uploadText))])])])]:t._e()],2),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.showProcess,expression:"showProcess"}],staticStyle:{width:"200px","margin-top":"8px"},attrs:{percentage:t.progressPercent}})],1)}),l=[],c=(a("a9e3"),a("b0c0"),a("ac1f"),a("5319"),a("a15b"),a("127f")),d=a("fa7d"),u={props:{disabled:{type:Boolean,default:!1},listType:{type:String,default:"text"},limit:{type:[String,Number],default:100},srcList:[],multiple:{type:Boolean,default:!1},accept:{type:String},fileList:{type:[Array,String]},showFileList:{type:Boolean,default:!0},single:{type:Boolean,default:!1},isBtnStyle:{type:Boolean,default:!1},uploadLimitSize:{type:Number,default:null},uploadBoxIcon:{type:String,default:"el-icon-plus"},uploadText:{type:String,default:null}},data:function(){return{centerDialogVisible:!1,progressPercent:0,showProcess:!1}},computed:{isImage:function(){return this.single?Object(d["a"])(this.fileList):""},isVideo:function(){return this.single?Object(d["b"])(this.fileList):""}},methods:{handlePreviewAvatar:function(){if(!this.single)return"";this.$viewerApi({images:[Object(d["c"])(this.fileList)]})},handlePreview:function(t){t.url&&window.open(Object(d["c"])(t.url),"_blank")},handleRemove:function(t,e){this.$refs.uploadFile.abort(),this.$emit("updateList",e)},handleChange:function(t,e){},beforeUpload:function(t){},beforeRemove:function(t,e){},onError:function(t,e,a){},onExceed:function(t,e){this.$message.error("Max Length "+this.limit)},onSuccess:function(t,e,a){this.$emit("updateList",a)},progress:function(t,e,a){var i=Math.floor(t.percent);this.progressPercent=i||0},httpRequest:function(t){var e=this,a=t.file.name.split(".").pop();if(this.accept){var i,n=null===(i=this.accept.replace(/image\//g,""))||void 0===i?void 0:i.split(","),r=n.find((function(t){return t.toUpperCase()==a.toUpperCase()}));if(console.log("findItem",r),!r)return this.$message.error("只支持".concat(n.join("、").toUpperCase(),"格式")),void this.$refs.uploadFile.uploadFiles.splice(0,1)}if(this.uploadLimitSize){var s=t.file.size/1024/1024<this.uploadLimitSize;if(!s)return void this.$message({message:"导入文件不能超过".concat(this.uploadLimitSize,"M的"),type:"warning"})}this.showProcess=!0,Object(c["a"])(t.file,(function(t){var a=Math.floor(t.loaded/t.total*100||0);e.progressPercent=a})).then((function(t){e.$emit("updateList",[{response:t}])})).finally((function(){e.showProcess=!1,e.progressPercent=0}))}}},f=u,p=(a("2764"),a("2877")),m=Object(p["a"])(f,o,l,!1,null,"8b815240",null),g=m.exports,v=a("aa47"),h={name:"abcd",components:{FileUpload:g},data:function(){return{cardList:[{name:"aaa",id:1},{name:"bbb",id:2},{name:"ccc",id:3},{name:"ddd",id:4},{name:"eee",id:5},{name:"fff",id:6}],befoDragData:[],input:"",isdrag:!1,dragNeedList:[],dialogTitle:"新增",dialogVisible:!1,rules:{name:[{required:!0,message:"请输入电镀名称",trigger:"blur"}],mainColor:{required:!0,message:"请输入",trigger:"blur"},img:{required:!0,message:"请上传电镀图",trigger:"blur"},typeList:{required:!0,message:"请至少选择一种报价类别",trigger:"blur"},arts:{required:!0,message:"适用的工艺",trigger:"blur"}},options:[{value:1,label:"aaaaa",arr:[1,2,3,4,5]},{value:2,label:"bbbbb",arr:[11,22,33,44,55]},{value:3,label:"ccccc",arr:[111,222,333,444,555]},{value:4,label:"ddddd",arr:[11111,22222,33333,44444,55555]},{value:5,label:"eeeee",arr:[111111,222222,333333,444444,555555]}],addEditform:{id:null,name:"",mainColor:"",secondaryColor:"",img:"",typeList:[],arts:[],isEnable:1},chooseList:[]}},watch:{dialogVisible:function(t){t||(this.$refs["ref_addEditform"].resetFields(),this.addEditform=this.$options.data().addEditform)},"addEditform.typeList":{deep:!0,handler:function(t){var e=this;console.log("addEditform.typeList",t),this.addEditform.arts=t.map((function(t,a){var i,n=e.options.find((function(e){return e.value==t})),r=e.addEditform.arts.findIndex((function(e){return e.id==t})),s={id:n.value,name:n.label,list:n.arr,chooseList:(null===(i=e.addEditform.arts[r])||void 0===i?void 0:i.chooseList)||[]};return s}))}}},methods:{itemClick:function(t,e){var a=e,i=t.chooseList;i.includes(a)?i.splice(i.indexOf(a),1):i.push(a)},updateFormDataImg:function(t){this.addEditform.img=t[0].response},formCancel:function(){this.dialogVisible=!1},formSubmit:function(){var t=this;this.$refs["ref_addEditform"].validate(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}t.dialogVisible=!1,e.next=6;break;case 4:return console.log("error submit!!"),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},createSrcRectMap:function(t){return t.reduce((function(t,e){var a=e.getBoundingClientRect(),i=a.left,n=a.top;return t[e.id]={left:i,top:n,card:e},t}),{})},scheduleAnimation:function(t){var e=this,a=this.$refs.cardRef.slice(),i=this.createSrcRectMap(a);t(),this.$nextTick((function(){var t=e.createSrcRectMap(a);Object.keys(i).forEach((function(e){var a=t[e],n=i[e],r={left:n.left-a.left,top:n.top-a.top},s=[{transform:"translate(".concat(r.left,"px, ").concat(r.top,"px)")},{transform:"translate(0, 0)"}],o={duration:300,easing:"cubic-bezier(0,0,0.32,1)"};a.card.animate(s,o)}))}))},cardToTop:function(t){var e=this;this.scheduleAnimation((function(){e.cardList.splice(0,0,e.cardList.splice(t,1)[0])})),this.dragNeedList=[].concat(this.cardList.map((function(t,e){return{id:t.id,sortNum:e+1}})))},btn_search:function(){console.log("search--")},btn_add:function(){this.dialogVisible=!0},clearSearchInputValue:function(){},btn_openDrag:function(){this.isdrag=!0,this.befoDragData=JSON.parse(JSON.stringify(this.cardList)),this.drag()},btn_cancel:function(){var t=this;this.isdrag=!1,this.scheduleAnimation((function(){t.cardList=t.befoDragData}))},btn_saveDrag:function(){},drag:function(){var t=this,e=document.querySelector("#sortBox");v["default"].create(e,{disabled:!1,handle:".moveDome",animation:150,onEnd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.newIndex,i=e.oldIndex;if(a!=i){t.cardList.splice(a,0,t.cardList.splice(i,1)[0]);var n=JSON.parse(JSON.stringify(t.cardList));t.$nextTick((function(){var e=n.map((function(t,e){return{id:t.id,sortNum:e+1}}));console.log(e),t.dragNeedList=[].concat(e)}))}}})}}},b=h,y=(a("11e7"),a("8cc2"),Object(p["a"])(b,i,n,!1,null,"2f9e6321",null));e["default"]=y.exports},d7db:function(t,e,a){},e9c4:function(t,e,a){var i=a("23e7"),n=a("d066"),r=a("d039"),s=n("JSON","stringify"),o=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(t,e,a){var i=a.charAt(e-1),n=a.charAt(e+1);return l.test(t)&&!c.test(n)||c.test(t)&&!l.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},u=r((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&i({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,a){var i=s.apply(null,arguments);return"string"==typeof i?i.replace(o,d):i}})},ed93:function(t,e,a){}}]);